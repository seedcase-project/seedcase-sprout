---
title: "Managing project-level metadata"
order: 2
jupyter: python3
---

In the last section, we saw how to write a minimal set of metadata properties
to `datapackage.json`. Here, we will take a closer look at the full
`package_properties.py` that is created by `create_properties_script()`. First,
delete file `scripts/package_properties.py` and change your `main.py` back to
look like this:

```{python}
#| eval: true
#| filename: "main.py"
import seedcase_sprout as sp

def main():
    # Create the properties script in the default location.
    sp.create_properties_script()

if __name__ == "__main__":
    main()
```

Now run the script from terminal:

``` {.bash filename="Terminal"}
uv run main.py
```

If you now view the created `package_properties.py` script, you will see that
it lists many of the most commonly used metadata names together with comments
indicating which are required and which are optional:

<!-- Create the script where quarto can find it for building the docs -->
{{< include _python-minimal-package-setup.qmd >}}
```{python}
#| include: false
sp.create_properties_script(package_path.root())
```


```{python}
#| echo: false
#| output: asis
#| filename: "scripts/package_properties.py"
print(
    '```python',
    package_path.properties_script().read_text(),
    '```',
    sep='\n'
)
```

such as making sure to fill in the required fields, as well as using the
documentation for the `PackageProperties` to know what to write. The
core of a data package is its properties. Without these, your data are
simply a collection of files without any context or meaning. The
metadata (properties) are **crucially important** for understanding and
actually using the data in your data package!

To help with writing the properties, Sprout includes several properties
data classes, such as `PackageProperties`, `LicenseProperties`, and
`ContributorProperties`, to make it easier for you to make properties
with the correct fields filled in.

For now, let's write some basic properties for your data package. Below
is an example of a set of properties with required fields filled in
(including the optional but highly recommended `contributors` field).

```{python}
#| eval: false
package_properties = sp.PackageProperties(
    name="diabetes-study",
    title="A Study on Diabetes",
    # You can write Markdown below, with the helper `sp.dedent()`.
    description=sp.dedent("""
        # Data from a 2021 study on diabetes prevalence

        This data package contains data from a study conducted in 2021 on the
        *prevalence* of diabetes in various populations. The data includes:

        - demographic information
        - health metrics
        - survey responses about lifestyle
        """),
    contributors=[
        sp.ContributorProperties(
            title="Jamie Jones",
            email="jamie_jones@example.com",
            path="example.com/jamie_jones",
            roles=["creator"],
        )
    ],
    licenses=[
        sp.LicenseProperties(
            name="ODC-BY-1.0",
            path="https://opendatacommons.org/licenses/by",
            title="Open Data Commons Attribution License 1.0",
        )
    ],
    # We don't include the rest of the properties script in this guide. The above is only to
    # show what it might look to write properties in the script.
)
```

## Creating a README of the properties

Having a *human-readable* version of what is contained in the
`datapackage.json` file is useful for others who may be working with or
wanting to learn more about your data package. You can use
`as_readme_text()` to convert the properties into text that can be added
to a README file. Let's create a README file with the properties of the
data package you just created by writing it in the `main.py` file.

```{python}
#| eval: false
#| filename: "main.py"
import seedcase_sprout as sp
from scripts.package_properties import package_properties

def main():
    # Create the properties script in default location.
    sp.create_properties_script()
    # Save the properties to `datapackage.json`.
    sp.write_properties(properties=package_properties)
    # Create text for a README of the data package.
    readme_text = sp.as_readme_text(package_properties)
    # Write the README text to a `README.md` file.
    sp.write_file(readme_text, sp.PackagePath().readme())

if __name__ == "__main__":
    main()
```

Sprout splits the README creation functionality into two steps: One to
make the text and one to write to the file. That way, if you want to add
or manipulate the text, you can do so before writing it to the file.
This is useful if you want to add information to the README that you
don't want included in the `datapackage.json` file. For this guide we
won't cover how or why to do this.

Next, run this command in the Terminal to make the README file. The
`write_file()` will always overwrite the existing README file.

``` {.bash filename="Terminal"}
uv run main.py
```

```{python}
#| include: false
# Only to check that it runs.
from scripts.package_properties import package_properties
readme_text = sp.as_readme_text(package_properties)
sp.write_file(
    string=readme_text,
    path=package_path.readme()
)
```

Now you can see that the `README.md` file has been created in your data
package:

```{python}
#| echo: false
print(file_tree(package_path.root()))
```

## Editing package properties

If you made a mistake and want to update the properties in the current
`datapackage.json`, you can edit the Python script directly where you
previously made the properties. Since everything is written in Python
scripts, updating those scripts and re-running your build pipeline
(`main.py`) will then update everything.

If you need help with filling in the right properties, see the
documentation for the `PackageProperties` classes or run e.g.,
`print(sp.PackageProperties())` to get a list of all the fields you can
fill in for a package.

Now that you know how to creat and manage metadata at the project-level,
it is time to learn how to add data to the project
and manage its metadata.

```{python}
#| include: false
temp_path.cleanup()
```
